<!DOCTYPE html>
<html>
<head>
    <title>QR Scanner</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
    <h1>QR Scanner</h1>
    <div id="reader" style="width: 300px;"></div>
    <h3>Scanned Values</h3>
    <ul id="list"></ul>

    <script>
        let list = JSON.parse(localStorage.getItem("qrData")) || [];
        const ul = document.getElementById("list");

        function renderList() {
            ul.innerHTML = "";
            list.forEach(item => {
                let li = document.createElement("li");
                li.textContent = item;
                ul.appendChild(li);
            });
        }

        function onScanSuccess(decodedText) {
            if (!list.includes(decodedText)) {
                list.push(decodedText);
                localStorage.setItem("qrData", JSON.stringify(list));
                renderList();
            }
        }

        new Html5Qrcode("reader").start(
            { facingMode: "environment" },
            { fps: 10, qrbox: 250 },
            onScanSuccess
        );

        renderList();
    </script>
</body>
</html>
