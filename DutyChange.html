<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Duty Change Request</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="form-container">
  <h2>Duty Change Request</h2>
  <form id="dutyForm">
	<div class="form-row">
      <label for="date">Date:</label>
      <input type="date" id="date" required>
    </div>
    <div class="form-row">
      <label>Requested Staff:</label>
      <input type="text" id="requestedStaff" readonly>
    </div>
	 <div class="form-row">
      <label for="dutyTime">Duty Time:</label>
      <input type="time" id="dutyTime" required>
    </div>
    <div class="form-row">
      <label for="recipientStaff">Recipient Staff:</label>
      <select id="recipientStaff" required>
        <option value="">--Choose--</option>
        <option value="Mohamed Mujahid">Mohamed Mujahid</option>
        <option value="Magrib Ibrahim">Magrib Ibrahim</option>
        <option value="Ruhushath Ahmed">Ruhushath Ahmed</option>
        <option value="Moahmed Jeezan">Moahmed Jeezan</option>
        <option value="Aishath Aroosha">Aishath Aroosha</option>
      </select>
    </div>
    
    <div class="form-row">
      <label for="dutyTime">Duty Time:</label>
      <input type="time" id="dutyTime" required>
    </div>
    <input type="submit" value="Send Request">
  </form>
  <button onclick="goBack()">Back to Dashboard</button>
</div>

<script>
const currentUser = localStorage.getItem("currentUser");
if(!currentUser) window.location.href = "index.html";

document.getElementById("requestedStaff").value = currentUser;

function goBack(){
  window.location.href = "dashboard.html";
}

document.getElementById("dutyForm").addEventListener("submit", function(e){
  e.preventDefault();
  
  const request = {
    requestedStaff: currentUser,
    recipient: document.getElementById("recipientStaff").value,
    date: document.getElementById("date").value,
    dutyTime: document.getElementById("dutyTime").value,
    status: "pending"
  };

  const allRequests = JSON.parse(localStorage.getItem("dutyRequests") || "[]");
  allRequests.push(request);
  localStorage.setItem("dutyRequests", JSON.stringify(allRequests));

  alert("Your request has been sent. Recipient must accept it.");
  this.reset();
});
</script>
</body>
</html>
