<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Saved Bookings</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background: #f4f6f9; }
  h2 { text-align: center; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; }
  th, td { padding: 8px 12px; border: 1px solid #ccc; text-align: left; }
  th { background: #007bff; color: white; }
  tr:nth-child(even) { background: #f9f9f9; }
</style>
</head>
<body>

<h2>Saved Bookings</h2>
<table id="bookingsTable">
  <thead>
    <tr>
      <th>Receipt No</th>
      <th>Date</th>
      <th>Name</th>
      <th>Flight</th>
      <th>Seat</th>
      <th>Adults</th>
      <th>Kids</th>
      <th>Payment Type</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody id="tableBody">
    <tr><td colspan="9" style="text-align:center;">Loading...</td></tr>
  </tbody>
</table>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="fire1.js"></script>

<script>
const tableBody = document.getElementById("tableBody");

async function fetchBookings() {
  try {
    const snapshot = await db.collection("bookings")
      .orderBy("receiptNo", "asc")
      .get();

    if(snapshot.empty) {
      tableBody.innerHTML = '<tr><td colspan="9" style="text-align:center;">No bookings found</td></tr>';
      return;
    }

    tableBody.innerHTML = '';
    snapshot.forEach(doc => {
      const data = doc.data();
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${data.receiptNo}</td>
        <td>${data.date}</td>
        <td>${data.name}</td>
        <td>${data.flight}</td>
        <td>${data.seat}</td>
        <td>${data.adults}</td>
        <td>${data.kids}</td>
        <td>${data.paymentType}</td>
        <td>${data.total.toFixed(2)}</td>
      `;
      tableBody.appendChild(row);
    });
  } catch(err) {
    console.error("Error fetching bookings:", err);
    tableBody.innerHTML = `<tr><td colspan="9" style="color:red;text-align:center;">Error fetching bookings: ${err.message}</td></tr>`;
  }
}

window.addEventListener("DOMContentLoaded", fetchBookings);
</script>

</body>
</html>
